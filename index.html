<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione, deleniti illum enim nobis, ipsam asperiores voluptas odit libero suscipit repellendus repellat, nisi adipisci! Quia repudiandae, ab eius est ea iure sint laborum at vel, possimus eveniet quisquam provident. Qui adipisci quis facilis neque autem vitae voluptates, reprehenderit tempore et beatae.</p>
    
    <script type="module">

        function addDays (date, days) {
            const newDate = new Date(date.getTime())
            newDate.setDate(newDate.getDate() + days)
            return newDate
        }

        const YEARS = 0
        const MONTHS = 1
        const DAYS = 2
        const HOURS = 3
        const MINUTES = 4
        const SECONDS = 5

        // function addInterval(date, n, unit) {
        //     const parts = [
        //         date.getFullYear(),
        //         date.getMonth(),
        //         date.getDate(),
        //         date.getMinutes(),
        //         date.getSeconds(),
        //         date.getMilliseconds()
        //     ]
        //     parts[unit] += n
        //     return new Date(...parts)
        // }

        // function addInterval(date, n, unit) {
        //     const newDateFuture = new Date(date.getTime())
        //     switch (unit) {
        //         case DAYS:
        //             newDateFuture.setDate(newDateFuture.getDate() + n)
        //             break;
        //         case MONTHS:
        //             newDateFuture.setMonth(newDateFuture.getMonth() + n)
        //             break;
        //         case YEARS:
        //             newDateFuture.setFullYear(newDateFuture.getFullYear() + n)
        //             break;
        //     }
        //     return newDateFuture
        // }

        function addInterval(date, interval) {
            const parts = [
                date.getFullYear(),
                date.getMonth(),
                date.getDate(),
                date.getHours(),
                date.getMinutes(),
                date.getSeconds(),
                date.getMilliseconds()
            ]
            for (const [unit, value] of Object.entries(interval)) {
                parts[unit] += value
            }
            const timeDifference = (new Date(...parts).getTime() - Date.now()) / 60000;
            console.log(timeDifference);
console.log(new Date(...parts))
            switch (true) {
                case timeDifference >=  525600:
                    const ans = Math.floor(timeDifference / 525600 );
                    const mois = Math.floor((timeDifference % 525600) / 43200);
                    return `${ans}ans ${mois}m`;
                    break;
                case timeDifference >= 43200:
                    const moiss = Math.floor(timeDifference / 43200 );
                    const jour = Math.floor((timeDifference % 43200) / 1440);
                    return `${moiss}m ${jour}j`;
                    break;
                case timeDifference >= 1440:
                    const jours = Math.floor(timeDifference / 1440 );
                    const heure = Math.floor((timeDifference % 1440) / 60);
                    return `${jours}j ${heure}h`;
                    break;
                case timeDifference >= 60:
                    const heures = Math.floor(timeDifference / 60 );
                    const minutes = Math.floor((timeDifference % 60));
                    return `${heures}h ${minutes}m`;
                    break;
                default:
                    return new Date(...parts);
                    break
            }
        }

        // function addIntervals(date, intervals) {
        //     let resultDate = new Date(date.getTime());
        //     for (const unit in intervals) {
        //         resultDate = addInterval(resultDate, intervals[unit], unit);
        //     }
        //     return resultDate;
        // }
        
        const today = new Date();
        const tomorrow = addDays(today, 1)
        const future = addInterval(today, 3, YEARS)
        const futures = addInterval(today, {
            [YEARS]: 1,
            [MONTHS]: 2,
            [DAYS]: 3,
            [HOURS]: 4,
            [MINUTES]: 5,
            [SECONDS]: 0,
        })

       

        // console.log(today);
        // console.log(tomorrow);
        // console.log(future);
        console.log(futures);
        // console.log(futures, `${Math.round((futures.getTime() - Date.now()) / 60000)} Minutes`);
        // console.log(futures, `${Math.round((futures.getTime() - Date.now()) / 86400000)} Jours`);


        
        // console.log(Date());

        // (async function () {
        //     const {hello} = await import('./array.js')
        //     hello()
        // })()


        // console.log(import('./array.js').then(({hello}) => {
        //     hello()
        // }));


        // import * as A from './array.js'
        // import {sum as somme, hello} from './array.js'
        // console.log(A.sum([12, 23, 19]), A.hello());
        // console.log(somme([12, 23, 19]), hello());
        
        
        // import hello from "./hello.js";
        // console.log(hello());


        // import {sum, default as hello} from './array.js'
        // console.log(sum([12, 16]), hello());
        
    // </script>
    
    
    
    
    
    
    
    <!-- <script>
        // const a = new AbortController()
        // Promise.race([
        //     fetch('https://jsonplaceholder.typicode.com/posts/?_limit=5&_delay=2000', {
        //         signal: a.signal
        //     }),
        //     fetch('https://jsonplaceholder.typicode.com/posts/?_limit=3', {
        //         signal: a.signal
        //     })
        // ]).then(r => r.json().then(body => {
        //     a.abort()
        //     console.log(body)
        // }))




        // async function fetchUsers(params) {
        //     const r = await fetch('https://jsonplaceholder.typicode.com/posts', {
        //         method: 'POST',
        //         headers: {
        //             "Accept": "application/json",

        //             "Content-Type": "application/json",
        //         },
        //         body: JSON.stringify({title: 'Mon premier'})
        //     })
        //     if (r.ok === true) {
        //         return r.json()
        //     }
        //     throw new Error('Impossible de contacter le serveur')
        // }

        // fetchUsers().then(users => console.log(users))





        // const p = new Promise((resolve, reject) => {
        //     resolve(4)
        // })

        // function wait(duration) {
        //     return new Promise((resolve, reject) =>{
        //         setTimeout(() => {
        //             resolve(duration)
        //         }, duration)
        //     })
        // }

        // function waitAndFail(duration) {
        //     return new Promise((resolve, reject) =>{
        //         setTimeout(() => {
        //             reject(duration)
        //         }, duration)
        //     })
        // }

        // async function main() {
        //     const duration = await wait(2000)
        //     console.log(`Duration: ${duration}`)
        //     return 5
        // }

        // Promise.race([wait(1000), wait(2000)])
        //     .then(console.log)
        //     .catch(console.error)



        //     // try {
        //     //     await waitAndFail(2000)
        //     //     console.log('BONJOUR')
        //     //     await wait(1000)
        //     //     console.log('HELLO')
        //     // } catch (e) {
        //     //     console.log('Error');
        //     // }
            
        // }
        // main()

        // wait(2000)
        //     .then(() => {
        //         console.log('Attente 2s')
        //         return wait(1000)
        //     })
        //     .then(() => {
        //         console.log('Attente 1s')
        //         return waitAndFail(2000)
        //     })
        //     .catch(() => {
        //         console.log('Attente 2s');
        //         return waitAndFail()
        //     })
        //     .catch(() => null)





        
        // p
        //     .then((n) => {
        //         console.log('Le nombre', n)
        //         return 5
        //         // throw new Errir('echec')
        //     })
        //     .then((n) => console.log('Le nombre 2', n))
        //     .catch((e) => {
        //         console.log('Erreur', e);
        //         return 2
        //     })
        //     .then(n => console.log(2))
        //     .finally(() => console.log('aaa'))








// let i  = 5
        // while (i > 0) {
            
        //     setTimeout(() => {
        //         console.log(`${i} S`);
        //     }, 1000);
        //     i--
        // }

        // function decompte(i) {
        //     console.log(`${i} s`);
        //     setTimeout(() => {
        //         decompte(i - 1)
        //     }, 1000)
        //     }

        // decompte(3)
        
        









        // function wait(duration) {
        //     const t = Date.now()
        //     while(Date.now() - t < duration){}
        // }

        // console.log('Bonjour')
        // // wait(1000)
        // setInterval(() => {
        //     console.log('les gens');
        // }, 1000);
        // console.log('Au revoir');
        





        // const age = 18
        // const message = age >= 18 ? 'Majeur' : 'Mineur'
        // console.log(message);




// const double = n => n * 2

        // let a = 2
        // a ??= 5
        // console.log(a)

        // const person = {firstname: 'John'}
        // console.log(person?.age?.toString())

        // const [premiereNote, ...autresNote] = [12, 17, 18]
        // console.log(premiereNote, autresNote)

        // const {firstName, ...rest} = {
        //     firstName: "John",
        //     lastName: "Doe",
        //     age: 34
        // }
        // console.log(firstName, rest)








    // class Book {

    // #page = 1

    // constructor (title, pages) {
    //     this.title = title
    //     this.pages = pages
    // }

    // get page () {
    //     return this.#page
    // }

    // nextPage () {
    //     if (this.#page < this.pages) {
    //         this.#page++
    //     }
    // }

    // close () {
    //     this.#page = 1
    // }
    // }

    // class Library {

    // #books = []

    // addBook(book) {
    //     this.#books.push(book)
    // }

    // addBooks(books) {
    //     books.forEach(this.addBook, this)
    // }

    // findBooksByLetter(letter) {
    //     return this.#books.filter((book) => book.title[0].toLowerCase() === letter.toLowerCase())
    // }

    // }











// class Student {

// #notes = []

// get notes () {
//     return this.#notes // On a le droit d'y accéder depuis la classe
// }

// }
// const a = new Student()
// a.#notes // Private field '#notes' must be declared in an enclosing class
// a.notes // []









//         class Student {

// // La propriété sera automatiquement placée sur l'objet lors de sa construction
// notes = []

// // La méthode constructor permet d'indiquer comment le type sera construit
// constructor (firstname, lastname) {
//     // this permettra d'accéder à l'objet construit
//     this.firstname = firstname
//     this.lastname = lastname
// }

// // On peut ajouter des méthodes, this fera référence à l'objet sur lequel on utilisera la méthode
// addNote (note) {
//     this.notes.push(note)
// }

// // On peut créer des getters, ce sont des sortes de propriétés magiques qui ont une logique
// get fullname () {
//     return `${this.firstname} ${this.lastname}`
// }

// get moyenne () {
//     let sum = 0
//     for (let note of this.notes) {
//         sum += note
//     }
//     return sum / this.notes.length
// }

// // On peut aussi créer des setters pour ajouter de la logique
// set name (str) {
//     const items = str.split(' ')
//     this.firstname = items[0]
//     this.lastname = items[1]
// }

// }
    </script> -->
</body>
</html>